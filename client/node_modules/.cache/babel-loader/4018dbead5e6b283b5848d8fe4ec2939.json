{"ast":null,"code":"import _toConsumableArray from \"C:\\\\Users\\\\bellis\\\\Desktop\\\\onstore\\\\lstore\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"C:\\\\Users\\\\bellis\\\\Desktop\\\\onstore\\\\lstore\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _regeneratorRuntime from \"C:\\\\Users\\\\bellis\\\\Desktop\\\\onstore\\\\lstore\\\\client\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\bellis\\\\Desktop\\\\onstore\\\\lstore\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\Users\\\\bellis\\\\Desktop\\\\onstore\\\\lstore\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\bellis\\\\Desktop\\\\onstore\\\\lstore\\\\client\\\\src\\\\components\\\\brews.js\";\nimport React, { useState, useEffect, useContext, useReducer, usePrevious } from 'react';\nimport { BarLoader } from 'react-spinners';\nimport TodosContext from '../context';\nimport { Link } from 'react-router-dom';\nimport { Box, Heading, Text, Card, Button, Image, Mask } from 'gestalt';\nimport Strapi from \"strapi-sdk-javascript/build/main\";\nvar apiUrl = process.env.API_URL || \"http://localhost:1337\";\nvar strapi = new Strapi(apiUrl);\nexport default function Brews() {\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      urlParam = _useState2[0],\n      seturlParam = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      brews = _useState4[0],\n      setBrews = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      brand = _useState6[0],\n      setBrand = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      cartItems = _useState8[0],\n      setCartItems = _useState8[1];\n\n  useEffect(function () {\n    getData();\n  }, []);\n\n  var getData =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var url, _ref2, data;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              url = window.location.pathname.substr(1);\n              seturlParam(url);\n              _context.prev = 2;\n              _context.next = 5;\n              return strapi.request('POST', '/graphql', {\n                data: {\n                  query: \"query {\\n                        brand(id: \\\"\".concat(url, \"\\\") {\\n                        _id\\n                        name\\n                        brews {\\n                          _id\\n                          name\\n                          description\\n                          image{\\n                            url\\n                          }\\n                          price\\n                          \\n                          \\n                        }\\n                      }\\n                    }\")\n                }\n              });\n\n            case 5:\n              _ref2 = _context.sent;\n              data = _ref2.data;\n              setBrews(data.brand.brews);\n              setBrand(data.brand.name);\n              _context.next = 14;\n              break;\n\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](2);\n              console.error(_context.t0);\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this, [[2, 11]]);\n    }));\n\n    return function getData() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var addToCart = function addToCart(brew) {\n    var alreadyInCart = cartItems.findIndex(function (item) {\n      return item._id === brew._id;\n    });\n\n    if (alreadyInCart === -1) {\n      var updatedItems = cartItems.concat(_objectSpread({}, brew, {\n        quantity: 1\n      }));\n      setCartItems(updatedItems);\n    } else {\n      var _updatedItems = _toConsumableArray(cartItems);\n\n      _updatedItems[alreadyInCart].quantity += 1;\n      setCartItems(_updatedItems);\n    }\n  };\n\n  return React.createElement(Box, {\n    marginTop: 4,\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"start\",\n    dangerouslySetInlineStyle: {\n      __style: {\n        flexWrap: 'wrap-reverse'\n      }\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, React.createElement(Box, {\n    display: \"flex\",\n    direction: \"column\",\n    alignItems: \"center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, React.createElement(Box, {\n    margin: 2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, React.createElement(Heading, {\n    color: \"orchid\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, brand)), React.createElement(Box, {\n    dangerouslySetInlineStyle: {\n      __style: {\n        backgroundColor: '#bdcdd9'\n      }\n    },\n    wrap: true,\n    shape: \"rounded\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    padding: 4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, brews.map(function (brew) {\n    return React.createElement(Box, {\n      paddingY: 4,\n      width: 210,\n      margin: 2,\n      key: brew._id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(Card, {\n      image: React.createElement(Box, {\n        height: 250,\n        width: 200,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(Image, {\n        fit: \"cover\",\n        alt: \"brand\",\n        naturalHeight: 1,\n        naturalWidth: 1,\n        src: \"\".concat(apiUrl).concat(brew.image.url),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(Box, {\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      direction: \"column\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(Box, {\n      marginBottom: 2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(Text, {\n      bold: true,\n      size: \"xl\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, brew.name)), React.createElement(Text, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, brew.description), React.createElement(Text, {\n      color: \"orchid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, \"$\", brew.price), React.createElement(Box, {\n      marginTop: 2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(Text, {\n      bold: true,\n      size: \"xl\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: function onClick() {\n        return addToCart(brew);\n      },\n      color: \"blue\",\n      text: \"Add to Cart\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }))))));\n  }))), React.createElement(Box, {\n    alignSelf: \"end\",\n    marginTop: 2,\n    marginLeft: 8,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  }, React.createElement(Mask, {\n    shape: \"rounded\",\n    wash: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148\n    },\n    __self: this\n  }, React.createElement(Box, {\n    display: \"flex\",\n    direction: \"column\",\n    alignItems: \"center\",\n    padding: 2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149\n    },\n    __self: this\n  }, React.createElement(Heading, {\n    align: \"center\",\n    size: \"md\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  }, \" Your Cart\"), React.createElement(Text, {\n    color: \"gray\",\n    italic: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  }, cartItems.length, \" Items Selected\"), cartItems.map(function (item) {\n    return React.createElement(Box, {\n      key: item._id,\n      display: \"flex\",\n      alignItems: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(Text, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, item.name, \" x \", item.quantity, \" - \", item.quantity * item.price));\n  }), React.createElement(Box, {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    direction: \"column\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  }, React.createElement(Box, {\n    margin: 2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }, cartItems.length === 0 && React.createElement(Text, {\n    color: \"red\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }, \"Please select some items \")), React.createElement(Text, {\n    size: \"lg\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169\n    },\n    __self: this\n  }, \"Total: $3.99\"), React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170\n    },\n    __self: this\n  }, React.createElement(Link, {\n    to: \"/checkout\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171\n    },\n    __self: this\n  }, \"Checkout\")))))));\n}","map":{"version":3,"sources":["C:\\Users\\bellis\\Desktop\\onstore\\lstore\\client\\src\\components\\brews.js"],"names":["React","useState","useEffect","useContext","useReducer","usePrevious","BarLoader","TodosContext","Link","Box","Heading","Text","Card","Button","Image","Mask","Strapi","apiUrl","process","env","API_URL","strapi","Brews","urlParam","seturlParam","brews","setBrews","brand","setBrand","cartItems","setCartItems","getData","url","window","location","pathname","substr","request","data","query","name","console","error","addToCart","brew","alreadyInCart","findIndex","item","_id","updatedItems","concat","quantity","__style","flexWrap","backgroundColor","map","image","description","price","length"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useContext, useReducer, usePrevious} from 'react';\r\nimport { BarLoader} from 'react-spinners'\r\nimport TodosContext from '../context';\r\nimport {Link} from 'react-router-dom';\r\nimport {Box, Heading, Text, Card, Button, Image, Mask} from 'gestalt';\r\n\r\nimport Strapi from \"strapi-sdk-javascript/build/main\";\r\nconst apiUrl = process.env.API_URL || \"http://localhost:1337\";\r\nconst strapi = new Strapi(apiUrl);\r\nexport default function Brews() {\r\n    const [urlParam, seturlParam] = useState('');\r\n    const [brews, setBrews] = useState([])\r\n    const [brand, setBrand] = useState('')\r\n    const [cartItems, setCartItems] = useState([])\r\n    useEffect(() => {\r\n       getData()\r\n    },[])\r\n\r\n    const getData = async () => {\r\n        const url = window.location.pathname.substr(1);\r\n        seturlParam(url)\r\n        try {\r\n           \r\n            const {data} = await strapi.request('POST', '/graphql', {\r\n                data: {\r\n                    query: `query {\r\n                        brand(id: \"${url}\") {\r\n                        _id\r\n                        name\r\n                        brews {\r\n                          _id\r\n                          name\r\n                          description\r\n                          image{\r\n                            url\r\n                          }\r\n                          price\r\n                          \r\n                          \r\n                        }\r\n                      }\r\n                    }`\r\n                }\r\n            });\r\n           setBrews(data.brand.brews)\r\n           setBrand(data.brand.name)\r\n         } catch (err){\r\n            console.error(err)\r\n           \r\n         }\r\n    }\r\n\r\n    const addToCart = (brew) => {\r\n        const alreadyInCart = cartItems.findIndex(item => item._id === brew._id);\r\n\r\n        if(alreadyInCart === -1) {\r\n            const updatedItems = cartItems.concat({\r\n                ...brew,\r\n                quantity: 1\r\n            })\r\n            setCartItems(updatedItems);\r\n        } else {\r\n            const updatedItems = [...cartItems];\r\n            updatedItems[alreadyInCart].quantity += 1;\r\n            setCartItems(updatedItems);\r\n        }\r\n    }\r\n   \r\n    \r\n    return(\r\n      \r\n        <Box\r\n        marginTop={4}\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"start\"\r\n        dangerouslySetInlineStyle={{\r\n            __style: {\r\n                flexWrap: 'wrap-reverse'\r\n            }\r\n        }}\r\n        >\r\n        <Box\r\n        display=\"flex\"\r\n        direction=\"column\"\r\n        alignItems=\"center\"\r\n        >\r\n            <Box margin={2} >\r\n                <Heading color=\"orchid\">{brand}</Heading>\r\n            </Box>\r\n\r\n            <Box\r\n            dangerouslySetInlineStyle={{\r\n\r\n                __style: {\r\n                    backgroundColor: '#bdcdd9'\r\n                }\r\n            }}\r\n            wrap\r\n            shape=\"rounded\"\r\n            display=\"flex\"\r\n            justifyContent=\"center\"\r\n            padding={4}\r\n            >\r\n            {brews.map(brew => (\r\n              <Box\r\n              paddingY={4}\r\n              width={210}\r\n              margin={2}\r\n              key={brew._id}\r\n              >\r\n                  <Card\r\n                  image={ <Box height={250} width={200}>\r\n                      <Image\r\n                      fit=\"cover\"\r\n                      alt=\"brand\"\r\n                      naturalHeight={1}\r\n                      naturalWidth={1}\r\n                      src={`${apiUrl}${brew.image.url}`}\r\n                      />\r\n                  </Box>}\r\n                  >\r\n                  <Box display=\"flex\" alignItems=\"center\" justifyContent=\"center\" direction=\"column\">\r\n                  <Box marginBottom={2}>\r\n                  <Text bold size=\"xl\" >{brew.name}</Text>\r\n                  </Box>\r\n                  <Text>{brew.description}</Text>\r\n                  <Text color=\"orchid\">${brew.price}</Text>\r\n                  <Box marginTop={2}>\r\n                  <Text bold size=\"xl\">\r\n                \r\n                  <Button onClick={() => addToCart(brew)} color=\"blue\" text=\"Add to Cart\" />\r\n              \r\n                  </Text>\r\n                  </Box>\r\n                  </Box>\r\n                  </Card>\r\n              </Box>\r\n               \r\n              \r\n            ))}\r\n            </Box>\r\n\r\n        </Box>\r\n\r\n        {/* user cart */}\r\n        <Box alignSelf=\"end\" marginTop={2} marginLeft={8}>\r\n            <Mask shape=\"rounded\" wash>\r\n            <Box display=\"flex\" direction=\"column\" alignItems=\"center\" padding={2}>\r\n                <Heading align=\"center\" size=\"md\"> Your Cart</Heading>\r\n                <Text color=\"gray\" italic>\r\n                    {cartItems.length} Items Selected\r\n                </Text>\r\n\r\n                {/* cart items */}\r\n                {cartItems.map(item => (\r\n                    <Box key={item._id} display=\"flex\" alignItems=\"center\">\r\n                        <Text>\r\n                            {item.name} x {item.quantity} - {(item.quantity * item.price)}\r\n                        </Text>\r\n                    </Box>\r\n                ))}\r\n                <Box display=\"flex\" alignItems=\"center\" justifyContent=\"center\" direction=\"column\">\r\n                    <Box margin={2}>\r\n                    {cartItems.length === 0 && (\r\n                        <Text color=\"red\">Please select some items </Text>\r\n                    )}\r\n                    </Box>\r\n                    <Text size=\"lg\">Total: $3.99</Text>\r\n                    <Text>\r\n                        <Link to=\"/checkout\">Checkout</Link>\r\n                    </Text>\r\n                </Box>\r\n            </Box>\r\n            </Mask>\r\n        </Box>\r\n\r\n\r\n\r\n        </Box>\r\n    )\r\n    \r\n}"]},"metadata":{},"sourceType":"module"}